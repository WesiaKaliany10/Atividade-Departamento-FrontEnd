<div class="card p-5 border-round-2xl shadow-3 surface-card w-full">
  <h2 class="mb-5 text-2xl font-semibold text-center">Lista de Funcionários</h2>


  <div class="flex flex-wrap gap-3 mb-4">


    <div>
      <label for="filtroCargo" class="block mb-1 font-medium">Cargo</label>
      <select id="filtroCargo" [(ngModel)]="filtroCargo" (change)="carregarFuncionarios()"
              class="border p-2 rounded w-48">
        <option value="">Todos</option>
        <option *ngFor="let cargo of cargos" [value]="cargo">{{ cargo }}</option>
      </select>
    </div>


    <div class="flex items-center gap-2">
      <input type="checkbox" id="filtroAtivo" [(ngModel)]="filtroAtivo" (change)="carregarFuncionarios()" />
      <label for="filtroAtivo" class="font-medium">Ativo</label>
    </div>


    <button type="button" (click)="router.navigate(['/funcionarios/novo'])"
            class="p-button p-component p-button-success flex items-center gap-1">
      <i class="pi pi-plus"></i>
      Novo Funcionário
    </button>
  </div>


  <p-table [value]="funcionarios" [paginator]="true" [rows]="10" class="w-full">

    <ng-template pTemplate="header">
      <tr>
        <th>Nome</th>
        <th>Email</th>
        <th>Cargo</th>
        <th>Departamento</th>
        <th>Salário</th>
        <th>Data de Admissão</th>
        <th>Ativo</th>
        <th>Ações</th>
      </tr>
    </ng-template>


    <ng-template pTemplate="body" let-funcionario>
      <tr>
        <td>{{ funcionario.nome }}</td>
        <td>{{ funcionario.email }}</td>
        <td>{{ funcionario.cargo }}</td>
        <td>{{ funcionario.departamento?.nome }}</td>
        <td>{{ funcionario.salario | currency:'BRL' }}</td>
        <td>{{ funcionario.dataAdmissao | date:'dd/MM/yyyy' }}</td>
        <td>
          <span [ngClass]="funcionario.ativo ? 'text-green-600' : 'text-red-600'">
            {{ funcionario.ativo ? 'Sim' : 'Não' }}
          </span>
        </td>
        <td class="flex gap-2">

          <button type="button" (click)="router.navigate(['/funcionarios/editar', funcionario.id])"
                  class="p-button p-component p-button-warning p-button-sm flex items-center gap-1">
            <i class="pi pi-pencil"></i>
          </button>


          <button type="button" (click)="inativar(funcionario)"
                  class="p-button p-component p-button-danger p-button-sm flex items-center gap-1"
                  [disabled]="!funcionario.ativo">
            <i class="pi pi-ban"></i>
          </button>
        </td>
      </tr>
    </ng-template>


    <ng-template pTemplate="emptymessage">
      <tr>
        <td colspan="8" class="text-center text-gray-500 py-4">Nenhum funcionário encontrado.</td>
      </tr>
    </ng-template>
  </p-table>
</div>
